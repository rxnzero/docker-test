<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ResponseTimeHourly">
  
  <statement id="findByResponseTimeHourly" parameterClass="java.util.HashMap" resultClass="com.eactive.eai.rms.onl.statistics.etc.vo.ResponseTimeHourlyVO">		
          SELECT A.EAISVCNAME AS "EAISVCNAME", 
                 A.HHRSPNSAVGVAL1   AS "HHRSPNSAVGVAL1",   A.HHRSPNSMAXVAL1  AS "HHRSPNSMAXVAL1",
                 A.HHRSPNSAVGVAL2   AS "HHRSPNSAVGVAL2",   A.HHRSPNSMAXVAL2  AS "HHRSPNSMAXVAL2",
                 A.HHRSPNSAVGVAL3   AS "HHRSPNSAVGVAL3",   A.HHRSPNSMAXVAL3  AS "HHRSPNSMAXVAL3",
                 A.HHRSPNSAVGVAL4   AS "HHRSPNSAVGVAL4",   A.HHRSPNSMAXVAL4  AS "HHRSPNSMAXVAL4",
                 A.HHRSPNSAVGVAL5   AS "HHRSPNSAVGVAL5",   A.HHRSPNSMAXVAL5  AS "HHRSPNSMAXVAL5",
                 A.HHRSPNSAVGVAL6   AS "HHRSPNSAVGVAL6",   A.HHRSPNSMAXVAL6  AS "HHRSPNSMAXVAL6",
                 A.HHRSPNSAVGVAL7   AS "HHRSPNSAVGVAL7",   A.HHRSPNSMAXVAL7  AS "HHRSPNSMAXVAL7",
                 A.HHRSPNSAVGVAL8   AS "HHRSPNSAVGVAL8",   A.HHRSPNSMAXVAL8  AS "HHRSPNSMAXVAL8",
                 A.HHRSPNSAVGVAL9   AS "HHRSPNSAVGVAL9",   A.HHRSPNSMAXVAL9  AS "HHRSPNSMAXVAL9",
                 A.HHRSPNSAVGVAL10  AS "HHRSPNSAVGVAL10",  A.HHRSPNSMAXVAL10 AS "HHRSPNSMAXVAL10",
                 A.HHRSPNSAVGVAL11  AS "HHRSPNSAVGVAL11",  A.HHRSPNSMAXVAL11 AS "HHRSPNSMAXVAL11",
                 A.HHRSPNSAVGVAL12  AS "HHRSPNSAVGVAL12",  A.HHRSPNSMAXVAL12 AS "HHRSPNSMAXVAL12",
                 A.HHRSPNSAVGVAL13  AS "HHRSPNSAVGVAL13",  A.HHRSPNSMAXVAL13 AS "HHRSPNSMAXVAL13",
                 A.HHRSPNSAVGVAL14  AS "HHRSPNSAVGVAL14",  A.HHRSPNSMAXVAL14 AS "HHRSPNSMAXVAL14",
                 A.HHRSPNSAVGVAL15  AS "HHRSPNSAVGVAL15",  A.HHRSPNSMAXVAL15 AS "HHRSPNSMAXVAL15",
                 A.HHRSPNSAVGVAL16  AS "HHRSPNSAVGVAL16",  A.HHRSPNSMAXVAL16 AS "HHRSPNSMAXVAL16",
                 A.HHRSPNSAVGVAL17  AS "HHRSPNSAVGVAL17",  A.HHRSPNSMAXVAL17 AS "HHRSPNSMAXVAL17",
                 A.HHRSPNSAVGVAL18  AS "HHRSPNSAVGVAL18",  A.HHRSPNSMAXVAL18 AS "HHRSPNSMAXVAL18",
                 A.HHRSPNSAVGVAL19  AS "HHRSPNSAVGVAL19",  A.HHRSPNSMAXVAL19 AS "HHRSPNSMAXVAL19",
                 A.HHRSPNSAVGVAL20  AS "HHRSPNSAVGVAL20",  A.HHRSPNSMAXVAL20 AS "HHRSPNSMAXVAL20",
                 A.HHRSPNSAVGVAL21  AS "HHRSPNSAVGVAL21",  A.HHRSPNSMAXVAL21 AS "HHRSPNSMAXVAL21",
                 A.HHRSPNSAVGVAL22  AS "HHRSPNSAVGVAL22",  A.HHRSPNSMAXVAL22 AS "HHRSPNSMAXVAL22",
                 A.HHRSPNSAVGVAL23  AS "HHRSPNSAVGVAL23",  A.HHRSPNSMAXVAL23 AS "HHRSPNSMAXVAL23",
                 A.HHRSPNSAVGVAL0",  AS "HHRSPNSAVGVAL0",   A.HHRSPNSMAXVAL0  AS "HHRSPNSMAXVAL0",
          COALESCE(B.EAISVCDESC, 'UNKNOWN') AS "EAISVCDESC"
          FROM
          (
              SELECT
                  EAISVCNAME,
                  ROUND(AVG(S1HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL1,  MAX(S1HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL1,
                  ROUND(AVG(S2HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL2,  MAX(S2HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL2,
                  ROUND(AVG(S3HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL3,  MAX(S3HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL3,
                  ROUND(AVG(S4HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL4,  MAX(S4HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL4,
                  ROUND(AVG(S5HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL5,  MAX(S5HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL5,
                  ROUND(AVG(S6HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL6,  MAX(S6HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL6,
                  ROUND(AVG(S7HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL7,  MAX(S7HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL7,
                  ROUND(AVG(S8HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL8,  MAX(S8HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL8,
                  ROUND(AVG(S9HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL9,  MAX(S9HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL9,
                  ROUND(AVG(S10HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL10, MAX(S10HHRSPNSMAXVAL) AS HHRSPNSMAXVAL10,
                  ROUND(AVG(S11HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL11, MAX(S11HHRSPNSMAXVAL) AS HHRSPNSMAXVAL11,
                  ROUND(AVG(S12HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL12, MAX(S12HHRSPNSMAXVAL) AS HHRSPNSMAXVAL12,
                  ROUND(AVG(S13HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL13, MAX(S13HHRSPNSMAXVAL) AS HHRSPNSMAXVAL13,
                  ROUND(AVG(S14HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL14, MAX(S14HHRSPNSMAXVAL) AS HHRSPNSMAXVAL14,
                  ROUND(AVG(S15HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL15, MAX(S15HHRSPNSMAXVAL) AS HHRSPNSMAXVAL15,
                  ROUND(AVG(S16HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL16, MAX(S16HHRSPNSMAXVAL) AS HHRSPNSMAXVAL16,
                  ROUND(AVG(S17HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL17, MAX(S17HHRSPNSMAXVAL) AS HHRSPNSMAXVAL17,
                  ROUND(AVG(S18HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL18, MAX(S18HHRSPNSMAXVAL) AS HHRSPNSMAXVAL18,
                  ROUND(AVG(S19HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL19, MAX(S19HHRSPNSMAXVAL) AS HHRSPNSMAXVAL19,
                  ROUND(AVG(S20HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL20, MAX(S20HHRSPNSMAXVAL) AS HHRSPNSMAXVAL20,
                  ROUND(AVG(S21HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL21, MAX(S21HHRSPNSMAXVAL) AS HHRSPNSMAXVAL21,
                  ROUND(AVG(S22HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL22, MAX(S22HHRSPNSMAXVAL) AS HHRSPNSMAXVAL22,
                  ROUND(AVG(S23HHRSPNSAVGVAL), 3) AS HHRSPNSAVGVAL23, MAX(S23HHRSPNSMAXVAL) AS HHRSPNSMAXVAL23,
                  ROUND(AVG(S0HHRSPNSAVGVAL), 3)  AS HHRSPNSAVGVAL0,  MAX(S0HHRSPNSMAXVAL)  AS HHRSPNSMAXVAL0
             FROM $schemaId$.TSEAIST02                                                    
			<isNotEmpty prepend="WHERE" property="startDate"> 
			       STATCYMD BETWEEN #startDate# AND #endDate#
			</isNotEmpty>
             GROUP BY EAISVCNAME
          ) A LEFT OUTER JOIN $schemaId$.TSEAIHE01 B
          ON A.EAISVCNAME = B.EAISVCNAME
  </statement>
</sqlMap>
