<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="fieldExtractInfo">
  <statement id="selectListForEaiSvcName" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
    SELECT 
        A.EAISVCNAME ,  	A.ETRACTDSTCD, 		A.FLDPRCSSNO, 
        A.MSGDSTCD,       A.BZWKFLDNAME,    A.MSGFLDSTARTSITUVAL , A.MSGFLDLEN,
        B.EAISVCDESC
    FROM $schemaId$.TSEAIFR03 A
       , $schemaId$.TSEAIHE01 B
    WHERE 
    	 	A.EAISVCNAME = B.EAISVCNAME(+)
        AND A.EAISVCNAME = #eaiSvcName# 
        AND A.ETRACTDSTCD = #etractDstcd# 
    ORDER BY
        A.EAISVCNAME, A.ETRACTDSTCD, A.FLDPRCSSNO
  </statement>

  <statement id="selectListCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
    SELECT COUNT(*) CNT FROM $schemaId$.TSEAIFR03
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="searchEaiSvcName">
          EAISVCNAME LIKE UPPER('%'||#searchEaiSvcName#||'%')
      </isNotEmpty>
    </dynamic>
  </statement>

  <statement id="selectList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
    SELECT ROWNO, B.* FROM ( SELECT ROWNUM AS ROWNO, A.* FROM
    (
    SELECT 
			EAISVCNAME, ETRACTDSTCD, FLDPRCSSNO, MSGDSTCD,
    		BZWKFLDNAME
    FROM $schemaId$.TSEAIFR03
      <dynamic prepend="WHERE">
        <isNotEmpty prepend="AND" property="searchEaiSvcName">
          EAISVCNAME LIKE UPPER('%'||#searchEaiSvcName#||'%')
        </isNotEmpty>
      </dynamic>
    ) A ) B WHERE ROWNO BETWEEN #startNum# AND #endNum#
  </statement>
  <insert id="insert" parameterClass="java.util.HashMap">
    INSERT INTO $schemaId$.TSEAIFR03
            (
            EAISVCNAME ,    ETRACTDSTCD,    FLDPRCSSNO, 
            MSGDSTCD,       BZWKFLDNAME,    MSGFLDSTARTSITUVAL, 
            MSGFLDLEN
            )
    VALUES (
            #eaiSvcName# ,    #etractDstcd#,    #fldPrcssNo#, 
            #msgDstcd#,       #bzwkFldName#,    #msgFldStartSituVal#,
            #msgFldLen#
            )
  </insert>

  
  <update id="update" parameterClass="java.util.HashMap">
    UPDATE $schemaId$.TSEAIFR03 
    SET MSGDSTCD=#msgDstcd#, 
        BZWKFLDNAME=#bzwkFldName#, 
        MSGFLDSTARTSITUVAL=#startSituVal#,
        MSGFLDLEN=#len#
    WHERE EAISVCNAME  =#eaiSvcName#  
      AND ETRACTDSTCD =#etractDstcd# 
      AND FLDPRCSSNO  =#fldPrcssNo#
  </update>
</sqlMap>
