<?xml version="1.0" encoding="UTF-8"?>
<!-- TSEAIHK05 --><!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="B2BAdapterMap">
  <statement id="selectListCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
    SELECT COUNT(*) FROM $schemaId$.TSEAIFR07 
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="searchEaiSevrInstncName">
        EAISEVRINSTNCNAME LIKE UPPER( CONCAT( '%' , #searchEaiSevrInstncName# , '%'))
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="searchEaiSvcName">
        EAISVCNAME LIKE UPPER( CONCAT( '%' , #searchEaiSvcName# , '%') )
      </isNotEmpty>
    </dynamic>
  </statement>

  <statement id="selectList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
    SELECT ROWNO, B.* 
    FROM ( 
    	SELECT @NO := @NO + 1 AS ROWNO, A.* 
    	FROM
    	(
	    	SELECT 
	        EAISEVRINSTNCNAME,      EAISVCNAME ,              EXTNLINSTIIDNFINAME, 
	        DMNDDTALSBZWKDSTICNAME, PSVSYSADPTRBZWKGROUPNAME, ADPTRBZWKNAME 
		    FROM $schemaId$.TSEAIFR07 
		    <dynamic prepend="WHERE">
		      <isNotEmpty prepend="AND" property="searchEaiSevrInstncName">
		        EAISEVRINSTNCNAME LIKE UPPER( CONCAT( '%' , #searchEaiSevrInstncName# , '%'))
		      </isNotEmpty>
		      <isNotEmpty prepend="AND" property="searchEaiSvcName">
		        EAISVCNAME LIKE UPPER( CONCAT( '%' , #searchEaiSvcName# , '%') )
		      </isNotEmpty>
		    </dynamic>
    	) A,  (SELECT @NO := 0) R
    ) B WHERE ROWNO BETWEEN #startNum# AND #endNum#
  </statement>
</sqlMap>
