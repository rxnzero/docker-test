<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">
	
<sqlMap namespace="MessageItem">

	<statement id="selectList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
	       MsgItemDsticName AS "MSGITEMDSTICNAME" ,
	       MsgClmnName AS "MSGCLMNNAME" ,
	       MsgClmnAttriPtrnCd AS "MSGCLMNATTRIPTRNCD" ,
	       MsgClmnVal AS "MSGCLMNVAL" ,
	       ThisMsgClmnUseYn AS "THISMSGCLMNUSEYN" ,
	       ROWNO AS "ROWNO"
	  	FROM (
		    SELECT
		        MsgItemDsticName,
		        MsgClmnName,
		        MsgClmnAttriPtrnCd,
		        MsgClmnVal,
		        ThisMsgClmnUseYn,
		        ROW_NUMBER() OVER( ORDER BY MsgItemDsticName ) ROWNO
		    FROM $schemaId$.TSEAIBM01
		    <dynamic prepend="WHERE">
			    <isNotEmpty prepend="AND" property="searchMsgItemDsticName">
					MsgItemDsticName LIKE '%' || #searchMsgItemDsticName# || '%'
				</isNotEmpty>
			    <isNotEmpty prepend="AND" property="searchMsgClmnName">
					MsgClmnName LIKE '%' || #searchMsgClmnName# || '%'
				</isNotEmpty> 
			</dynamic> 
	       ) TMP
	 	WHERE ROWNO BETWEEN #startNum# AND #endNum#
	</statement>	

	<statement id="selectListCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
		SELECT 	COUNT(*) AS "TotalCount"
		FROM $schemaId$.TSEAIBM01
	    <dynamic prepend="WHERE">
		    <isNotEmpty prepend="AND" property="searchMsgItemDsticName">
				MsgItemDsticName LIKE '%' || #searchMsgItemDsticName# || '%'
			</isNotEmpty>
		    <isNotEmpty prepend="AND" property="searchMsgClmnName">
				MsgClmnName LIKE '%' || #searchMsgClmnName# || '%'
			</isNotEmpty> 
		</dynamic> 	
	</statement>	

</sqlMap>